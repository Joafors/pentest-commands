#!/bin/zsh

CURR_SHELL=$(basename "$SHELL")
RC_FILE=".$CURR_SHELL"rc
WHO_AM_I=$(whoami)

echo "[+] The current shell is $CURR_SHELL"

content_to_prepend="alias common=\"/usr/bin/cat /home/$WHO_AM_I/pentest-commands/commands/common\""
file_path=~/$RC_FILE
tmp_file="tmpfile"

if ! grep -qF "$content_to_prepend" "$file_path"; then
	echo "[+] Prepending $content_to_prepend to $file_path"
	echo "$content_to_prepend" | cat - "$file_path" > "$tmp_file"
	mv "$tmp_file" "$file_path"
else
	echo "[+] The line already exists in $file_path, skipping."
fi

echo "[+] Sourcing the updated file $file_path"
. "$file_path"
