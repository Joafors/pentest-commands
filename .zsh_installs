#!/bin/zsh

CURR_SHELL="zsh"
RC_FILE=".$CURR_SHELL"rc
WHO_AM_I=$(whoami)
RC_FILE_LOCATION = $(cd "/home/$WHO_AM_I")

echo "[+] The current shell is $CURR_SHELL"

alias_array=(
"alias common=\"/usr/bin/cat ~/pentest-commands/commands/common\""
"alias revshells=\"/usr/bin/cat ~/pentest-commands/commands/revshells\""
"alias foothold=\"/usr/bin/cat ~/pentest-commands/commands/foothold\""
"alias ttys=\"/usr/bin/cat ~/pentest-commands/commands/ttys\""
)

file_path="$RC_FILE_LOCATION/$RC_FILE"
echo $file_path
tmp_file="tmpfile"

for element in "${alias_array[@]}"; do
    if ! grep -qF "$content_to_prepend" "$file_path"; then
        echo "[+] Prepending $content_to_prepend to $file_path"
        echo "$content_to_prepend" | cat - "$file_path" > "$tmp_file"
        mv "$tmp_file" "$file_path"
    else
        echo "[+] A line already exists in $file_path, skipping."
    fi
done

echo "[+] Sourcing the updated file $file_path"
. "$file_path"

echo "[!] If you still can't use the aliases you might need to open a new terminal"
